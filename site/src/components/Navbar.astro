---
import { execSync } from 'node:child_process';

const gitHash = (() => {
  try { return execSync('git rev-parse --short HEAD').toString().trim(); } catch { return 'nogit'; }
})();
const pst = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/Los_Angeles' }));
const y = String(pst.getFullYear());
const mo = String(pst.getMonth() + 1).padStart(2, '0');
const d = String(pst.getDate()).padStart(2, '0');
const h = String(pst.getHours()).padStart(2, '0');
const mi = String(pst.getMinutes()).padStart(2, '0');
const s = String(pst.getSeconds()).padStart(2, '0');
const version = `v0.${y}${mo}${d}-${h}${mi}${s}-pst-${gitHash}`;
---
<nav class="flex flex-wrap items-center justify-between gap-3">
  <div class="flex items-center gap-3">
    <a href="/" class="text-3xl font-bold">ForecastingAPI.com</a>
    <span class="text-sm text-slate-400">A weatherman's dream</span>
    <a href="https://github.com/bryanwhiting/weatherman" target="_blank" rel="noreferrer" class="text-slate-400 hover:text-slate-200" aria-label="GitHub repository">
      <svg viewBox="0 0 24 24" class="h-5 w-5" fill="currentColor" aria-hidden="true">
        <path d="M12 .5a12 12 0 0 0-3.79 23.39c.6.11.82-.26.82-.58v-2.02c-3.34.73-4.04-1.41-4.04-1.41-.55-1.38-1.34-1.75-1.34-1.75-1.1-.74.08-.72.08-.72 1.21.09 1.85 1.22 1.85 1.22 1.08 1.82 2.82 1.3 3.5.99.11-.77.42-1.3.76-1.6-2.67-.3-5.47-1.32-5.47-5.86 0-1.29.47-2.35 1.23-3.18-.12-.3-.53-1.53.12-3.19 0 0 1-.32 3.3 1.21a11.6 11.6 0 0 1 6 0c2.3-1.53 3.3-1.21 3.3-1.21.65 1.66.24 2.89.12 3.19.77.83 1.23 1.89 1.23 3.18 0 4.55-2.8 5.55-5.48 5.85.43.37.82 1.1.82 2.22v3.29c0 .32.22.7.83.58A12 12 0 0 0 12 .5Z"/>
      </svg>
    </a>
  </div>
  <div class="text-xs text-slate-500">{version}</div>
</nav>
